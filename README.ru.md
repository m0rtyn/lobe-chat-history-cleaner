# Обработчик истории LobeChat

Этот проект представляет собой инструмент на Node.js для обработки и преобразования истории чатов, экспортированной из LobeChat, в очищенный JSON-файл и отформатированный Markdown-документ.

---

## Документация (Русский)

### Назначение

Этот скрипт предназначен для преобразования исходного JSON-экспорта из LobeChat в два удобных для пользователя формата:
1.  **Облегченный, очищенный JSON-файл**, содержащий только основные данные сообщений.
2.  **Структурированный Markdown-файл**, который идеально подходит для чтения, архивирования или дальнейшей обработки.

### Структура проекта

Инструмент состоит из трех файлов, работающих вместе:

-   `process-chat-history.js`: Это **главный скрипт**, который вы будете запускать. Он управляет всем процессом, вызывая два других модуля последовательно.
-   `clean-history.js`: Модуль, отвечающий за чтение исходного экспорта, извлечение и очистку данных сообщений, а также их сортировку по дате создания.
-   `to-markdown.js`: Модуль, который принимает очищенные данные и преобразует их в читаемый Markdown-формат.

### Как использовать

1.  **Требования**: Убедитесь, что на вашем компьютере установлен Node.js.
2.  **Настройка**: Поместите все три скрипта (`process-chat-history.js`, `clean-history.js`, `to-markdown.js`) и ваш файл экспорта из LobeChat (например, `lobe-export.json`) в одну директорию.
3.  **Выполнение**: Откройте терминал в этой директории и запустите главный скрипт.

    **Базовое использование:**
    Передайте имя вашего файла экспорта в качестве аргумента:
    ```bash
    node process-chat-history.js lobe-export.json
    ```

    **Расширенное использование (с пользовательскими именами):**
    Вы также можете указать свои имена для пользователя и ассистента в качестве дополнительных аргументов.
    ```bash
    node process-chat-history.js lobe-export.json Пользователь Ассистент
    ```
    Если имена не указаны, по умолчанию будут использоваться `User` и `Assistant`.

### Выходные файлы

При запуске скрипта будут созданы два новых файла:

1.  **Очищенный JSON**: `lobe-export-cleaned.json`
    -   Содержит структурированный список сообщений только с полями `content`, `role`, `createdAt` и `updatedAt`.
    -   Сообщения отсортированы в хронологическом порядке.

2.  **Markdown-документ**: `memory_lobe-export-cleaned.md`
    -   Представляет диалог в чистом, удобном для чтения формате.
    -   Каждое сообщение отформатировано следующим образом:
        ```md
        **{Имя}:**
        {Содержимое сообщения}

        ```
        Где `{Имя}` — это имя, которое вы указали (или `User`/`Assistant` по умолчанию).

---
